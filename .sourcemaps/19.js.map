{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MainPage } from './home';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    MainPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MainPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    MainPage\n  ]\n})\nexport class MainPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ModalController, ItemSliding, Item } from 'ionic-angular';\n\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs/Subject';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { UserProvider, LocationTrackerProvider, NotificationsProvider, UtilsProvider} from '../../providers';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class MainPage {\n\n  activeMenu = 'MainPage';\n  refresher;\n  activeItemSliding: ItemSliding = null;\n  private ngUnsubscribe:Subject<void> = new Subject();\n  private state: any;\n  private searchDone: boolean = null;\n  private noResults: boolean = false;\n  public currentUser: any;\n  public peopleAround: any = [];\n  public userSettings: any;\n  public searching: boolean = null;\n  private search: any = {\n    radius: 5,\n    friends: false\n  };\n  public disciplines: ReadonlyArray<any>;\n  public countries: ReadonlyArray<any>;\n\n  constructor(\n    private navCtrl: NavController,\n    public modalCtrl: ModalController,\n    private userProvider: UserProvider,\n    public afAuth: AngularFireAuth,\n    public locationTracker: LocationTrackerProvider,\n    private notifications: NotificationsProvider,\n    private utils: UtilsProvider,\n  ) {\n    console.log(this);\n    (!this.utils.countries) ? this.utils.getCountries().then(res => this.countries = res) : this.countries = this.utils.countries;\n    (!this.utils.disciplines) ? this.utils.getDisciplines().then(res => this.disciplines = res) : this.disciplines = this.utils.disciplines;\n    this.state = {\n      enabled: this.locationTracker.is_tracking\n    }\n\n    /*this.afAuth.authState.takeUntil(this.ngUnsubscribe).subscribe((user) => {\n      if(user){\n        this.currentUser = this.userProvider.currentUser;\n        this.userProvider.getUserData().takeUntil(this.ngUnsubscribe).subscribe((settings) => {\n          console.log('settings', settings);\n          if(settings){\n            console.log('settings checkProviderInfos', settings.providerId);\n            this.userSettings = settings;\n            this.userProvider.checkProviderInfos(settings);\n          }\n        });\n      }\n    });*/\n    this.currentUser = this.userProvider.userObject;\n    this.userProvider.getUser().takeUntil(this.ngUnsubscribe).subscribe(user => {\n      if(user){\n        this.currentUser = this.userProvider.currentUser;\n        this.userSettings = user;\n        this.userProvider.checkProviderInfos(user);\n      }\n    });\n  }\n\n  ionViewDidLeave(){\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n  }\n\n  showPerson(profile){\n    profile.isFriend = true;\n    this.navCtrl.push('ProfilePage', {userProfile:profile, isAnyProfile:true, showMap: true});\n  }\n\n  ionViewWillEnter(){\n    this.locationTracker.getCanTrack().takeUntil(this.ngUnsubscribe).subscribe((can_track) => {\n      //console.log('subscribe this.canTrackSubject', can_track);\n      if(this.state.enabled && !can_track){\n        this.state.enabled = can_track;\n      }\n    });\n\n    this.locationTracker.getIsTracking().takeUntil(this.ngUnsubscribe).subscribe((is_tracking) => {\n      //console.log('subscribe this.isTrackingSubject', is_tracking);\n      if(this.locationTracker.can_track){\n        this.state.enabled = is_tracking;\n      }else{\n        this.state.enabled = this.locationTracker.can_track;\n      }\n    });\n\n\n  }\n\n  onToggleEnabled(event) {\n    if(this.state.enabled){\n      setTimeout(() => {\n        //this.state.enabled = this.locationTracker.can_track;\n      },300);\n      this.locationTracker.startTracking(this.currentUser.uid);\n\n    }else{\n      this.locationTracker.stopTracking();\n    }\n  }\n\n  findPeopleAround(){\n    let _peopleAround;\n    let subscribtion_is_done = false;\n    let timer_is_done = false;\n    let that = this;\n\n    this.peopleAround = [];\n    //delay animation to reflow less dom elements\n    setTimeout(function(){\n      that.searching = true;\n      that.searchDone = false;\n    },0);\n\n\n    //Let time for animation before resolving data\n    setTimeout(function(){\n      timer_is_done = true;\n      if(subscribtion_is_done){\n        //that.searching = false;\n        //that.peopleAround = _peopleAround;\n        that.setPeople(_peopleAround);\n      }\n    },3000);\n\n    this.locationTracker.findPeopleAround({\n        uid: this.currentUser.uid,\n        distanceMax: this.search.radius,\n      })\n      .then((res) => {\n        console.log('res', res);\n        subscribtion_is_done = true;\n        if(this.search.friends){\n          res = this.filterByBuddies(res);\n        }\n        if(timer_is_done){\n          this.setPeople(res);\n        }else{\n          _peopleAround = res;\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n  }\n\n  filterByBuddies(users){\n    if(!this.userSettings.buddies && users.length < 1){\n      return [];\n    }\n\n    let myBuddies = this.userSettings.buddies;\n\n    return users.filter((_buddy) => {\n      let uid = _buddy.aFuid;\n      if(myBuddies[uid] && myBuddies[uid].pending === false){\n        return true;\n      }else{\n        return false;\n      }\n\n    })\n  }\n\n  setPeople(people){\n    let that = this;\n    //finish animation then print results\n    //to avoid reflow slugish animation\n\n    people.map((person) => {\n      person = this.utils.buildProfile(person, this.disciplines, this.countries);\n    })\n    if(this.refresher) {\n      this.refresher.complete();\n      this.refresher = null;\n    }\n\n    setTimeout(function(){\n      that.noResults = (people.length == 0) ? true : false ;\n      that.peopleAround = people;\n      that.searchDone = true;\n      that.searching = false;\n    },300);\n  }\n\n  stop(){\n    this.locationTracker.stopTracking();\n  }\n\n  openPage(page: any) {\n    this.navCtrl.push(page);\n  }\n\n  sendMessageCloseBy(index){\n    this.peopleAround[index].sent = true;\n\n    let oneSignalId = this.peopleAround[index].oneSignalId;\n    let name = this.userSettings.displayName;\n    let data = {\n      type: 'closeBy',\n      from: {\n        oneSignalId: this.userSettings.oneSignalId,\n        user_id: this.userSettings.aFuid\n      },\n      displayName: name\n    };\n    let contents = {\n      'en': `${name} is close by!`,\n      'fr': `${name} n'est pas loin!`\n    }\n    this.notifications.sendMessage([oneSignalId], data, contents);\n  }\n\n  doRefresh(refresher){\n    this.refresher = refresher;\n    this.findPeopleAround();\n  }\n\n  openMap(index){\n    let data = {\n      state: 'display_trackers',\n      key: null,\n      values: null,\n      page:'MapPage',\n      userId: this.currentUser.uid,\n      buddy: this.peopleAround[index]\n    }\n\n    let modal = this.modalCtrl.create('ModalNavPage', data);\n    modal.present();\n    modal.onDidDismiss(data => {\n      console.log('dismiss map', data);\n    });\n  }\n\n  avatarLoaded(index){\n    this.peopleAround[index].avatarLoaded = true;\n  }\n\n  closeOption() {\n    if(this.activeItemSliding) {\n      this.activeItemSliding.close();\n      this.activeItemSliding = null;\n    }\n  }\n  openOption(itemSlide: ItemSliding, item: Item, options, clickEvent: Event) {\n    clickEvent.stopPropagation();\n    if(this.activeItemSliding!==null) //use this if only one active sliding item allowed\n    this.closeOption();\n    this.activeItemSliding = itemSlide;\n\n    let children = options.children;\n    let totalWidth = 0;\n    let swipeAmount = 160;\n    itemSlide.startSliding(swipeAmount);\n    itemSlide.moveSliding(swipeAmount);\n    setTimeout(function() {\n      for (var i = 0; i < children.length; i++) {\n        totalWidth += children[i].clientWidth;\n      }\n      swipeAmount = totalWidth || 150; //set your required swipe amount\n      itemSlide.setElementClass('active-options-right', true);\n      itemSlide.setElementClass('active-swipe-right', true);\n      item.setElementStyle('transition', null);\n      item.setElementStyle('transform', 'translate3d(-'+swipeAmount+'px, 0px, 0px)');\n    },0)\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}