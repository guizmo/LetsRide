{"version":3,"sources":["../../src/pages/events/events-modal/events-modal.module.ts","../../src/pages/events/events-modal/events-modal.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EventsModalPage } from './events-modal';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    EventsModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EventsModalPage),\n    TranslateModule.forChild(),\n  ],\n  exports: [\n    EventsModalPage\n  ]\n})\nexport class EventsModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events-modal/events-modal.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Discipline } from '../../../models';\nimport { PlacesProvider, AlertProvider, UtilsProvider } from '../../../providers';\n\nimport * as moment  from 'moment';\n\n@IonicPage()\n@Component({\n  selector: 'page-events-modal',\n  templateUrl: 'events-modal.html',\n})\nexport class EventsModalPage {\n\n  activeMenu = 'EventsPage';\n  private placeSelectorState:string = null;\n  private eventForm: FormGroup;\n  private disciplines: ReadonlyArray<Discipline>;\n  public places:any = [];\n  public currentYear = moment().format('YYYY');\n  public currentDate = moment().format();\n  public maxYear = moment().add(1, 'year').format('YYYY');\n\n  constructor(\n    private formBuilder: FormBuilder,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    private alertProvider: AlertProvider,\n    public translateService: TranslateService,\n    public utils: UtilsProvider,\n    private placesProvider: PlacesProvider\n  ) {\n    console.log(this);\n    (!this.utils.disciplines) ? this.utils.getDisciplines().then(res => this.disciplines = res) : this.disciplines = this.utils.disciplines;\n\n    let controls = {\n      name: '',\n      time: this.currentDate,\n      disciplines: '',\n      where: '',\n      place_id: '',\n      private: false\n    }\n    this.eventForm = formBuilder.group(controls);\n    this.places = navParams.data.places;\n    this.placeSelector(null);\n\n    if(navParams.data.values){\n      this.eventForm.patchValue(navParams.data.values);\n    }\n\n  }\n\n\n  onSave(){\n    if (!this.eventForm.valid) {\n      //NOT VALID\n      return\n    } else {\n      this.dismiss(this.eventForm.value);\n    }\n  }\n\n  cancel(){\n    this.dismiss({state: 'cancel'});\n  }\n\n  dismiss(data:any = null) {\n    let values;\n    if(data){\n      if(!this.placeSelectorState && data.place_id){\n        let place = this.getPlace(data.place_id);\n        data.where = place.name;\n      }\n      values = {\n        event: data\n      }\n      if(this.placeSelectorState == 'create'){\n        values.create_place = true;\n      }\n    }else{\n      values = data;\n    }\n    this.viewCtrl.dismiss(values);\n  }\n\n  placeSelector(type){\n    if(!type && this.places.length == 0){\n      this.placeSelectorState = 'create_first_place';\n      //this.alertProvider.showErrorMessage('places/none');\n    }else{\n      this.placeSelectorState = type;\n    }\n  }\n\n\n  getPlace(id){\n    let result = this.places.filter(p => p.key == id);\n    if(result.length){\n      result = result[0];\n    }else{\n      result = null;\n    }\n    return result;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events-modal/events-modal.ts"],"sourceRoot":""}