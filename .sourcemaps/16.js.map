{"version":3,"sources":["../../src/pages/events/events-modal/events-modal.module.ts","../../src/pages/events/events-modal/events-modal.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EventsModalPage } from './events-modal';\n\n@NgModule({\n  declarations: [\n    EventsModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EventsModalPage),\n  ],\n  exports: [\n    EventsModalPage\n  ]\n})\nexport class EventsModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events-modal/events-modal.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\n\nimport { Discipline } from '../../../models';\nimport { DisciplinesProvider, PlacesProvider, AlertProvider } from '../../../providers';\n\nimport * as moment  from 'moment';\n\n@IonicPage()\n@Component({\n  selector: 'page-events-modal',\n  templateUrl: 'events-modal.html',\n})\nexport class EventsModalPage {\n\n  private placeSelectorState:string = null;\n  private eventForm: FormGroup;\n  private disciplines: ReadonlyArray<Discipline>;\n  public places:any = [];\n  public currentYear = moment().format('YYYY');\n  public currentDate = moment().format();\n  public maxYear = moment().add(1, 'year').format('YYYY');\n\n  constructor(\n    private formBuilder: FormBuilder,\n    public navCtrl: NavController,\n    private disciplinesProvider: DisciplinesProvider,\n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    private alertProvider: AlertProvider,\n    private placesProvider: PlacesProvider\n  ) {\n    let controls = {\n      name: '',\n      time: this.currentDate,\n      disciplines: '',\n      where: '',\n      place_id: ''\n    }\n    this.eventForm = formBuilder.group(controls);\n    this.places = navParams.data.places;\n    this.placeSelector(null);\n    console.log(this);\n    if(navParams.data.values){\n      this.eventForm.patchValue(navParams.data.values);\n    }\n\n  }\n\n  ionViewDidLoad() {\n    this.disciplinesProvider.findAll().subscribe(\n      data => this.disciplines = data\n    );\n  }\n\n  onSave(){\n    if (!this.eventForm.valid) {\n      //NOT VALID\n      return\n    } else {\n      this.dismiss(this.eventForm.value);\n    }\n  }\n\n  cancel(){\n    this.dismiss({state: 'cancel'});\n  }\n\n  dismiss(data:any = null) {\n    let values;\n    if(data){\n      if(!this.placeSelectorState && data.place_id){\n        let place = this.getPlace(data.place_id);\n        data.where = place.name;\n      }\n      values = {\n        event: data\n      }\n      if(this.placeSelectorState == 'create'){\n        values.create_place = true;\n      }\n    }else{\n      values = data;\n    }\n    this.viewCtrl.dismiss(values);\n  }\n\n  placeSelector(type){\n    if(!type && this.places.length == 0){\n      this.placeSelectorState = 'create_first_place';\n      //this.alertProvider.showErrorMessage('places/none');\n    }else{\n      this.placeSelectorState = type;\n    }\n  }\n\n\n  getPlace(id){\n    let result = this.places.filter(p => p.key == id);\n    if(result.length){\n      result = result[0];\n    }else{\n      result = null;\n    }\n    return result;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events-modal/events-modal.ts"],"sourceRoot":""}