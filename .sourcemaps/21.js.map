{"version":3,"sources":["../../src/pages/account/account.module.ts","../../src/pages/account/account.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule  } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AccountPage } from './account';\nimport { ComponentsModule } from '../../components/components.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    AccountPage,\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(AccountPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    AccountPage\n  ],\n})\nexport class AccountPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, AlertController, MenuController } from 'ionic-angular';\n\nimport { UserProvider, LoadingProvider, AlertProvider } from '../../providers';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-account',\n  templateUrl: 'account.html',\n})\nexport class AccountPage {\n\n  private currentUser: firebase.User;\n  private emailVerified: boolean = false;\n  private alert;\n  private providerId: string = null;\n  public activeMenu = 'AccountPage';\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private userProvider: UserProvider,\n    public loadingProvider: LoadingProvider,\n    public afAuth: AngularFireAuth,\n    public modalCtrl: ModalController,\n    public alertCtrl: AlertController,\n    public alertProvider: AlertProvider,\n    public menuCtrl: MenuController\n  ) {\n    this.userAuth();\n\n    console.log(this)\n\n  }\n\n\n\n  userAuth(){\n    this.userProvider.afAuth.authState.subscribe((_user: firebase.User) => {\n      if (_user) {\n        this.providerId = _user.providerData[0].providerId;\n        this.currentUser = _user;\n        if(this.providerId == 'facebook'){\n          this.emailVerified = true;\n        }else{\n          this.emailVerified = _user.emailVerified;\n        }\n\n        this.menuCtrl.enable(this.emailVerified, 'mainMenu');\n      }\n    });\n  }\n\n\n\n  presentAccountModal(field) {\n    let modal = this.modalCtrl.create('AccountEditModalPage', {\n      user: this.currentUser,\n      field\n    })\n    modal.present();\n    modal.onDidDismiss(data => {\n      if(data != null && data != 'cancel'){\n        if(field == 'password'){\n          this.userProvider.updatePassword(data.currentPassword, data.newPassword);\n        }\n        if(field == 'email'){\n          this.confirmEmailUpdate(data.email);\n        }\n      }\n    })\n  }\n\n\n  confirmEmailUpdate(email){\n    const confirmEmailUpdate = this.alertProvider.confirmMessages.emailUpdate;\n    this.alert = this.alertCtrl.create({\n      title: confirmEmailUpdate.title,\n      message: confirmEmailUpdate.subTitle + email,\n      buttons: [\n        {\n          text: confirmEmailUpdate.back,\n          handler: data => {}\n        },\n        {\n          text: confirmEmailUpdate.next,\n          handler: data => {\n            this.emailVerified = false;\n            this.menuCtrl.enable(this.emailVerified, 'mainMenu');\n\n            this.userProvider.updateEmail(email)\n              .then((_user) => {\n                this.emailVerified = _user.emailVerified;\n                this.emailVerified = true;\n                this.menuCtrl.enable(this.emailVerified, 'mainMenu');\n              })\n              .catch((error) => {\n                let code = error[\"code\"];\n                this.alertProvider.showErrorMessage(code);\n                if (code == 'auth/requires-recent-login') {\n                  this.afAuth.auth.signOut();\n                }\n              });\n          }\n        }\n      ]\n    }).present();\n\n  }\n\n\n\n  ngOnDestroy(){\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts"],"sourceRoot":""}